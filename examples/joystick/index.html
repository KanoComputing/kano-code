<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Joystick Input</title>
<style>
html,
body,
kano-app-editor {
    width: 100%;
    height: 100%;
    margin: 0;
}
</style>
</head>
<body>
<script type="module">
import * as code from '../../index.js';
import * as i18n from '../../i18n.js';

const lang = i18n.getLang();

const app = {
    "source": "<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"app_onStart\" id=\"j-T@yof?NXR;{6mF/IJ/\" x=\"-135\" y=\"22\"><field name=\"FLASH\"></field><statement name=\"CALLBACK\"><block type=\"joystick_moveTo\" id=\"wHxJ3feIK/G=Yr1|uDTB\"><value name=\"X\"><shadow type=\"math_number\" id=\"0T]W-g-QOq~n8,R7oaaZ\"><field name=\"NUM\">100</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"2w*~PSG$cFqWs{o|MP?P\"><field name=\"NUM\">500</field></shadow></value><next><block type=\"player_image_set\" id=\"X5TrsertKpn_q?cQSO=`\"><value name=\"IMAGE\"><shadow type=\"stamp_getImage\" id=\"^Uj$+}i~%(EQkjk=?ZW5\"><field name=\"STICKER\">ladybug</field></shadow></value><next><block type=\"player_setScale\" id=\"^+oxKIil4^]I@BaJExIB\"><value name=\"SCALE\"><shadow type=\"math_number\" id=\"FJ*dEms6GXF^~gg?pP33\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"food_setScale\" id=\"o=AtT!qYk@{*U?EmwP{T\"><value name=\"SCALE\"><shadow type=\"math_number\" id=\"jkY7_j^36uhVbvyT?_sS\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"food_moveTo\" id=\"1UKLKp_hw4)c?uElq=Rl\" inline=\"false\"><value name=\"X\"><shadow type=\"math_number\" id=\"FYM-nUiIctQp*G6_e~DS\"><field name=\"NUM\">-500</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"6(Am0`Ejxjqp{uj3rdn^\"><field name=\"NUM\">-500</field></shadow></value><next><block type=\"draw_set_background_color\" id=\"T;GAa9dw`z*,QjZ)5%lg\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"r`k4,6n?F[vc!W}DX6aB\"><field name=\"COLOUR\">#4CAF51</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"every_x_seconds\" id=\"Si74GWcZX]S5po*Ok-u?\" x=\"296\" y=\"21\"><field name=\"UNIT\">seconds</field><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"PiA2F?`C|L=X{?cf[(c2\"><field name=\"NUM\">2</field></shadow></value><statement name=\"DO\"><block type=\"food_moveTo\" id=\"Nl;,wTw2fPpx)A2?V8G~\" inline=\"false\"><value name=\"X\"><shadow type=\"math_number\" id=\"ABEzIn3/]U9iS0a8=vD^\"><field name=\"NUM\">-500</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"8LY`0|r,Z0XvG=_PXwi`\"><field name=\"NUM\">-500</field></shadow></value><next><block type=\"in_x_time\" id=\"c%s||%Z15/3u}SNXFGj)\"><field name=\"UNIT\">seconds</field><value name=\"DELAY\"><shadow type=\"math_number\" id=\"wMJYR!R*0;3sqi3vhb1h\"><field name=\"NUM\">0.5</field></shadow></value><statement name=\"DO\"><block type=\"food_image_set\" id=\"wp(g(b|{V+JxlJD5SGKD\"><value name=\"IMAGE\"><shadow type=\"stamp_getImage\" id=\"rC0bT^6NA_*|xw)WQ=ld\"><field name=\"STICKER\">crocodile</field></shadow><block type=\"food_random\" id=\"gtV2^lc_JZ]-mxYyTO2u\"><field name=\"SET\">food</field></block></value><next><block type=\"food_moveTo\" id=\"mC;V*_GFGyLvW)?wlp^!\" inline=\"false\"><value name=\"X\"><shadow type=\"math_number\" id=\"ABEzIn3/]U9iS0a8=vD^\"><field name=\"NUM\">0</field></shadow><block type=\"math_random\" id=\"gmU!I5pS_ka;E*d~$MQt\"><value name=\"MIN\"><shadow type=\"math_number\" id=\")nMX%[~RNpY]]27s^_49\"><field name=\"NUM\">50</field></shadow></value><value name=\"MAX\"><shadow type=\"math_number\" id=\"U8i9/bB9Zo`E6aNf=|P[\"><field name=\"NUM\">750</field></shadow></value></block></value><value name=\"Y\"><shadow type=\"math_number\" id=\"8LY`0|r,Z0XvG=_PXwi`\"><field name=\"NUM\">0</field></shadow><block type=\"math_random\" id=\"XdBkkc;y%~EDa*pqC3%@\"><value name=\"MIN\"><shadow type=\"math_number\" id=\"MVH}4eS]!rOXA`g@HQ^A\"><field name=\"NUM\">50</field></shadow></value><value name=\"MAX\"><shadow type=\"math_number\" id=\"A|hN^2!`3Kd*R8L)Mjet\"><field name=\"NUM\">200</field></shadow></value></block></value><next><block type=\"controls_if\" id=\"Kn_SQ{Y9T|)uN%C]7b/U\"><field name=\"CONFIG\">{\"elseIfs\":0,\"else\":false}</field><comment pinned=\"false\" h=\"80\" w=\"160\">Make sure food doesn't appear under the player</comment><value name=\"IF0\"><block type=\"logic_compare\" id=\"_m)quj^Q0k^L_dyY}T4@\"><field name=\"OP\">LT</field><value name=\"A\"><block type=\"player_y_get\" id=\"e8EE?4d^^W6q|2pq2z}`\"></block></value><value name=\"B\"><block type=\"math_number\" id=\"gqfCns0X`KLi,2wq{MET\"><field name=\"NUM\">300</field></block></value></block></value><statement name=\"DO0\"><block type=\"food_moveTo\" id=\"`-MxDq?Wl{Q^Y*KHfNwL\"><value name=\"X\"><shadow type=\"math_number\" id=\"VLopmJSXr,]z*`_G=Xug\"><field name=\"NUM\">0</field></shadow><block type=\"food_x_get\" id=\")AQGKrdyYJB?L7BHVNi;\"></block></value><value name=\"Y\"><shadow type=\"math_number\" id=\"kAoZu3qM~v18OEyH?BOW\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\" id=\"RQSQ,v2ksm*Y5AP5Lo3_\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\" id=\"odtAC43thG-f_^1I10fE\"><field name=\"NUM\">550</field></shadow></value><value name=\"B\"><shadow type=\"math_number\" id=\"EE;6Le~db6{(z-NJ85W9\"><field name=\"NUM\">0</field></shadow><block type=\"food_y_get\" id=\"rxvI@Lgo;9]n%@RAvA4=\"></block></value></block></value></block></statement></block></next></block></next></block></statement></block></next></block></statement></block><block type=\"every_x_seconds\" id=\"Uaoea|{s@,-9w;i^^=WD\" x=\"295\" y=\"527\"><field name=\"UNIT\">frames</field><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"oPuc0nBf}3Y+lE`b[isr\"><field name=\"NUM\">1</field></shadow></value><statement name=\"DO\"><block type=\"controls_if\" id=\";cc6B0Ff0e{=1dGj}wU_\"><field name=\"CONFIG\">{\"elseIfs\":0,\"else\":false}</field><value name=\"IF0\"><block type=\"joystick_force_get\" id=\"0g|5H6tZZJ)!E8duJ?|x\"></block></value><statement name=\"DO0\"><block type=\"player_turn\" id=\"LEQm~(!HyYp2Lm,V][!O\"><field name=\"TYPE\">to</field><value name=\"ROTATION\"><shadow type=\"angle\" id=\"Dnr6gt9dh+]0}HFhgHD!\"><field name=\"VALUE\">0</field></shadow><block type=\"joystick_direction_get\" id=\"a0aI,rr4?O=fyZ1r^5;h\"></block></value><next><block type=\"player_moveAlong\" id=\"sQ8zvGI]mG,]yMP](wJ=\"><value name=\"DISTANCE\"><shadow type=\"math_number\" id=\"k*2mvoaNd787wp-O8nb)\"><field name=\"NUM\">6</field></shadow></value><next><block type=\"player_turn\" id=\"Nb_{?N*SF~aJ+moJ3pje\"><field name=\"TYPE\">clockwise</field><comment pinned=\"false\" h=\"80\" w=\"160\">The sticker orientation doesn't match the travel direction so we need to rotate by 90 degrees before it's drawn to the screen</comment><value name=\"ROTATION\"><shadow type=\"angle\" id=\"1wQcm/dSGiU{K8N6~p$$\"><field name=\"VALUE\">0</field></shadow><block type=\"math_number\" id=\"xW)%G6b01xJXWf0XvxYY\"><field name=\"NUM\">90</field></block></value><next><block type=\"player_moveTo\" id=\"sE|r-U@Mu)ehi6b_E}88\" inline=\"false\"><value name=\"X\"><shadow type=\"math_number\" id=\"GWc=bgr,Q5kttrEm2=kL\"><field name=\"NUM\">0</field></shadow><block type=\"math_constrain\" id=\"`-=w!%~7b~D$]b}RquDs\"><value name=\"VALUE\"><shadow type=\"math_number\" id=\"3-r`4}zjK/Yw8Pxeoe48\"><field name=\"NUM\">0</field></shadow><block type=\"player_x_get\" id=\",Z]5Zg~VyIDaf}rj|U,f\"></block></value><value name=\"LOW\"><shadow type=\"math_number\" id=\";Ix~=QqOm9NMlRl,sWdZ\"><field name=\"NUM\">50</field></shadow></value><value name=\"HIGH\"><shadow type=\"math_number\" id=\"m2c,(uq5+u8*;c-4N-G=\"><field name=\"NUM\">750</field></shadow></value></block></value><value name=\"Y\"><shadow type=\"math_number\" id=\"6U*bklV2mzT,2K=Uy[JM\"><field name=\"NUM\">0</field></shadow><block type=\"math_constrain\" id=\"9NYe?2%4K;K3Z;CvzNJ]\"><value name=\"VALUE\"><shadow type=\"math_number\" id=\"3-r`4}zjK/Yw8Pxeoe48\"><field name=\"NUM\">0</field></shadow><block type=\"player_y_get\" id=\"}X)HTgOZl5vFX7m41q)j\"></block></value><value name=\"LOW\"><shadow type=\"math_number\" id=\"AV*qsDxNTda[{uA9Jnq[\"><field name=\"NUM\">50</field></shadow></value><value name=\"HIGH\"><shadow type=\"math_number\" id=\"uD_%5wKK]RH-33vppV{B\"><field name=\"NUM\">550</field></shadow></value></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"$*5am({o9Re%8?@osEV1\"><field name=\"CONFIG\">{\"elseIfs\":0,\"else\":false}</field><value name=\"IF0\"><block type=\"logic_operation\" id=\"=x1-*6TIo*f?=O66{`n=\" inline=\"false\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\" id=\"M,*{A^Ofj$5K1V|MIC=C\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"player_x_get\" id=\"JdfMzu}n9RnMf[Dr/]V=\"></block></value><value name=\"B\"><block type=\"math_arithmetic\" id=\"zJo48OnsBrR=%d~UmWM)\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\" id=\"Q?6oG_Gye^HZFBE+5o/7\"><field name=\"NUM\">0</field></shadow><block type=\"food_x_get\" id=\"(jX(+MpHtlcf+1Wr2K$g\"></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"=/cGjcQZ-Rp-|gGl0z*V\"><field name=\"NUM\">75</field></shadow></value></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"%_y0885G~`B3?4K4+z{H\"><field name=\"OP\">LT</field><value name=\"A\"><block type=\"player_x_get\" id=\"EkowWNjj;E^jAm)KE]h^\"></block></value><value name=\"B\"><block type=\"math_arithmetic\" id=\"+3bV-Oh|7E{wsia56p/Z\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\" id=\"Q?6oG_Gye^HZFBE+5o/7\"><field name=\"NUM\">0</field></shadow><block type=\"food_x_get\" id=\"n9gUEsv1C@sQhcU^e)7R\"></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"aZeWI~Vz_b3k}nVl2$aT\"><field name=\"NUM\">75</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"R)G/O$!pd/|uxVrnJWUA\"><field name=\"CONFIG\">{\"elseIfs\":0,\"else\":false}</field><value name=\"IF0\"><block type=\"logic_operation\" id=\"(Kn5crkAt|W=zf@T$?=X\" inline=\"false\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\" id=\"MAzP}/R+2N4P;~wiqhTH\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"player_y_get\" id=\"(EiYJ|r`Q{-W}i74]{b8\"></block></value><value name=\"B\"><block type=\"math_arithmetic\" id=\"@6lD];x)ont$feKAzIJP\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\" id=\"Q?6oG_Gye^HZFBE+5o/7\"><field name=\"NUM\">0</field></shadow><block type=\"food_y_get\" id=\"R_na+yz|wHN,G@vL{X}O\"></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"NtJ2hzXqyF/T=sXx,-U6\"><field name=\"NUM\">75</field></shadow></value></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\",TP1A|bp]8;?dC?{x+;Z\"><field name=\"OP\">LT</field><value name=\"A\"><block type=\"player_y_get\" id=\"DO8q+NBLP;hC*@K?cgc?\"></block></value><value name=\"B\"><block type=\"math_arithmetic\" id=\"~3saFheNiApG2NOlusT|\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\" id=\"Hi_T5p|734Zs4_Lr)Kk[\"><field name=\"NUM\">0</field></shadow><block type=\"food_y_get\" id=\"(I)`qDiAwz_k*4R58Ll/\"></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"r*TB_JZ@{fOeKkLM^wkV\"><field name=\"NUM\">75</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"speaker_play\" id=\"MT!{e0`VYA7K/{%$g~=6\"><value name=\"SAMPLE\"><shadow type=\"speaker_getSample\" id=\"@cT(IA$5T@@SI;LN|T=U\"><field name=\"SAMPLE\">elec_ping</field></shadow></value><next><block type=\"food_moveTo\" id=\"i[+~-yCvk)=uV~t7j)lW\" inline=\"false\"><value name=\"X\"><shadow type=\"math_number\" id=\"i;,tjvw!n=$7}^nNZ;~c\"><field name=\"NUM\">-500</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"[y@hU8a_15UNti(v;+OT\"><field name=\"NUM\">-500</field></shadow></value></block></next></block></statement></block></statement></block></next></block></statement></block></xml>",
    "code": "app.onStart(function() {\n  joystick.moveTo(100, 500);\n  player.image = 'ladybug';\n  player.setScale(50);\n  food.setScale(50);\n  food.moveTo(-500, -500);\n  ctx.background = '#4CAF51';\n\n});\n\ntime.every(2, 'seconds', function () {\n  food.moveTo(-500, -500);\n  time.later(0.5, 'seconds', function () {\n    food.image = food.random('food');\n    food.moveTo(math.random(50, 750), math.random(50, 200));\n    // Make sure food doesn't appear under the player\n    if (player.y < 300) {\n      food.moveTo(food.x, 550 - food.y);\n    }\n  });\n});\n\ntime.every(1, 'frames', function () {\n  if (joystick.force) {\n    player.rotation = joystick.direction;\n    player.moveAlong(6);\n    // The sticker orientation doesn't match the travel direction so\n    // we need to rotate by 90 degrees before it's drawn to the screen\n    player.turnCW(90);\n    player.moveTo(Math.min(Math.max(player.x, 50), 750), Math.min(Math.max(player.y, 50), 550));\n  }\n  if (player.x > food.x - 75 && player.x < food.x + 75) {\n    if (player.y > food.y - 75 && player.y < food.y + 75) {\n      speaker.play('elec_ping');\n      food.moveTo(-500, -500);\n    }\n  }\n});\n",
    "parts": [
        {
            "type": "sticker",
            "id": "food",
            "name": "Food"
        },
        {
            "type": "sticker",
            "id": "player",
            "name": "Player"
        },
        {
            "type": "joystick",
            "id": "joystick",
            "name": "Joystick",
            "axis": 0
        },
        {
            "type": "speaker",
            "id": "speaker",
            "name": "Speaker"
        }
    ],
    "profile": "default"
};

i18n
    .load(lang, { blockly: true, kanoCodePath: '/' })
    .then(() => {
        const editor = new code.Editor();
        editor.load(app)
        editor.inject(document.body);
    });
</script>
</body>
</html>
