<link rel="import" href="../../../../../flow-down/flow-down.html">
<script>
    /**
     * @namespace Kano.MakeApps
     */
    Kano.MakeApps = Kano.MakeApps || {};

    Kano.MakeApps.Store = FlowDown.createStore({
        editor: {
            app: null,
            logoutEnabled: !Kano.MakeApps.config.DISABLE_LOGOUT,
            remixLoadingAlertOpened: false,
        },
        challenge: {
            banner: null,
            history: {
                backBuffer: [],
                forwardBuffer: [],
                ignoreNextStepChange: false,
            },
        },
        story: {},
        routing: {
            context: {},
        },
        user: null,
        config: Kano.MakeApps.config,
    });

    Kano.MakeApps.Store.types = function types (constants) {
        return Object.freeze(constants.reduce((acc, constant) => {
            acc[constant] = constant;
            return acc;
        }, {}))
    };

    const KanoCodeStoreElement = Polymer({ is: 'kc-store', behaviors: [Kano.MakeApps.Store.ProviderBehavior] });

    Kano.MakeApps.Store.storeElement = new KanoCodeStoreElement();
    Kano.MakeApps.Store.getState = () => Kano.MakeApps.Store.storeElement.getState();

    document.body.appendChild(Kano.MakeApps.Store.storeElement);

</script>
