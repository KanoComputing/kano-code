<link rel="import" href="../store.html">
<script>
    ((Kano) => {
        Kano.MakeApps = Kano.MakeApps || {};
        Kano.MakeApps.Actions = Kano.MakeApps.Actions || {};

        const store = Kano.MakeApps.Store;

        const CONSTANTS = ['UPDATE_VALUE'];
        const CONFIG_TYPES = store.types(CONSTANTS);

        store.addMutator(function (action) {
            switch (action.type) {
                case CONFIG_TYPES.UPDATE_VALUE: {
                    const value = typeof action.value !== 'undefined' && action.value !== null ? action.value : action.default;
                    this.set(`state.config.${action.key}`, value);
                    break;
                }
            }
        });

        Kano.MakeApps.Actions.Config = {
            updateConfigKey (key, value, d) {
                store.dispatch({ type: CONFIG_TYPES.UPDATE_VALUE, key, value, default: d });
            }
        };
    })(window.Kano = window.Kano || {});
</script>



