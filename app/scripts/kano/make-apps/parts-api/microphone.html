<link rel="import" href="../../app-modules/app-modules.html">
<link rel="import" href="../../app-modules/mic.html">
<link rel="import" href="./base.html">
<script>
    (function (Kano) {
        let Microphone, PartsAPI;

        Kano.MakeApps = Kano.MakeApps || {};
        PartsAPI = Kano.MakeApps.PartsAPI = Kano.MakeApps.PartsAPI || {};

        Microphone = {
            onVolumeThreshold (value, over, callback) {
                this.appModules.getModule('mic').onVolumeThreshold(value, (e) => {
                    callback();
                });
            },
            get volume () {
                return this.appModules ? this.appModules.getModule('mic').getVolume() : 0;
            },
            get pitch () {
                return this.appModules ? this.appModules.getModule('mic').getPitch() : 0;
            }
        };


        // @polymerBehavior
        Kano.MakeApps.PartsAPI['microphone'] = Kano.MakeApps.PartsAPI.Base.applyMixins({}, PartsAPI.Base, Microphone);
    })(window.Kano = window.Kano || {});
</script>
