<link rel="import" href="./dongle-base.html">
<script>
    (function (Kano) {
        let GyroAccelerometer, PartsAPI;

        Kano.MakeApps = Kano.MakeApps || {};
        PartsAPI = Kano.MakeApps.PartsAPI = Kano.MakeApps.PartsAPI || {};

        GyroAccelerometer = {
            start () {
                this.id = 'gyro-accelerometer';

                this.listeners = {
                    'gyro-data': (e) => {
                        this.lastGyroVector = e;
                        this.fire('gyro-accel-update');
                    },
                    'accelerometer-data': (e) => {
                        this.lastAccelVector = e;
                    }
                };

                PartsAPI.DongleBase.start.apply(this, arguments);
            },
            getGyroData (axis) {
                return this.lastGyroVector[axis];
            },
            getAccelerometerData (axis) {
                return this.lastAccelVector[axis];
            }
        };
        // @polymerBehavior
        Kano.MakeApps.PartsAPI['gyro-accelerometer'] = Object.assign({}, PartsAPI.DongleBase, GyroAccelerometer);
    })(window.Kano = window.Kano || {});
</script>
