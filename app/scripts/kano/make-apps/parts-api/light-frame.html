<link rel="import" href="./light-shape.html">
<script>
    (function () {
        window.Kano = window.Kano || {};

        Kano.MakeApps = Kano.MakeApps || {};
        /**
         * @namespace Kano.MakeApps.PartsAPI
         */
        Kano.MakeApps.PartsAPI = Kano.MakeApps.PartsAPI || {};

        const LightFrame = {
            _updateLightboard (force) {
                this.debounce('_updateLightboard', () => {
                    if (this.isRunning) {
                        let shape = this.getShape();
                        shape.force = force;
                        this.fire('update-shape', shape);
                    }
                });
            },
            getShape () {
                return {
                    id: this.model.id,
                    x: this.getX(),
                    y: this.getY(),
                    width: this.model.userProperties.width,
                    height: this.model.userProperties.height,
                    visible: this.model.visible,
                    bitmap: this.model.userProperties.bitmap,
                    type: 'frame'
                };
            },
            getWidth () {
                return parseInt(this.get('model.userProperties.width'));
            },
            getHeight () {
                return parseInt(this.get('model.userProperties.height'));
            }
        };
        Kano.MakeApps.PartsAPI.LightFrame = Object.assign({}, Kano.MakeApps.PartsAPI.LightShape, LightFrame);
        /**
         * @polymerBehavior
         */
        Kano.MakeApps.PartsAPI['light-frame'] = Kano.MakeApps.PartsAPI.LightFrame;
    })();
</script>