<link rel="import" href="./app-module.html">
<!-- <script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script> -->

<script>
    (function (Kano) {

        class MinecraftModule extends Kano.AppModules.AppModule {

            constructor () {
                super();

                this.addMethod('setBlocks', '_setBlocks');
            }

            /*
             * @param position Array Coordrinates where to place the block [x,y,z]
             * @param size Array     The size of the block created [x,y,z]
             * @param type String    Type of material for the block
             */
            _setBlocks (position, size, type) {
                if (QWebChannel) {
                    new QWebChannel(qt.webChannelTransport, (channel) => {
                        let minecraftComponent = channel.objects.minecraftComponent;
                        minecraftComponent.setBlocks(
                            position[0], position[1], position[2],
                            size[0], size[1], size[2],
                            type
                        );
                    });
                }
                console.log(`BLOCK [${type}] pos(${position.x}, ${position.y}, ${position.z}) size(${size.x}, ${size.y}, ${size.z})`);
            }
        }

        Kano.AppModules.modules['minecraft'] = new MinecraftModule();

    })(window.Kano = window.Kano || {});
</script>
