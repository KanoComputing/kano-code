<dom-module id="kano-bitmap-renderer">
    <style>
    :host {
        display: block;
    }
    </style>
    <template>
        <canvas id="canvas" width$="[[_canvasSize(width, pixelSize, spacing)]]" height$="[[_canvasSize(height, pixelSize, spacing)]]"></canvas>
    </template>
    <script type="text/javascript">
        Polymer({
            is: 'kano-bitmap-renderer',
            properties: {
                width: Number,
                height: Number,
                pixelSize: Number,
                spacing: {
                    type: Number,
                    value: 0
                },
                bitmap: {
                    type: Array,
                    value: () => {
                        return [];
                    }
                }
            },
            observers: [
                '_renderCanvas(width, height, pixelSize, bitmap.*)'
            ],
            _canvasSize (size, pixelSize, spacing) {
                return size * pixelSize + (size * (spacing * 2));
            },
            _renderCanvas () {
                let ctx = this.$.canvas.getContext('2d'),
                    x, y;
                for (let i = 0; i < this.bitmap.length; i++) {
                    x = (i % this.width);
                    y = Math.floor(i / this.width);
                    x = this.spacing + x * (this.pixelSize + this.spacing * 2);
                    y = this.spacing + y * (this.pixelSize + this.spacing * 2);
                    ctx.fillStyle = this.bitmap[i];
                    ctx.fillRect(x, y, this.pixelSize, this.pixelSize);
                }
            }
        });
    </script>
</dom-module>
