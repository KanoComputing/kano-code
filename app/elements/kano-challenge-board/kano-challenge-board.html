<dom-module id="kano-challenge-board">
    <style>
    :host {
        display: block;
        @apply(--layout-vertical);
    }
    :host * {
        @apply(--layout-flex);
    }
    :host #video {
        width: 100%;
    }
    </style>
    <template>
        <template is="dom-if" if="{{type.isBlockly}}" restamp>
            <kano-blockly-challenge steps="{{board.steps}}" id="blockly">
                <kano-blockly class="blockly" toolbox="{{board.toolbox}}"></kano-blockly>
            </kano-blockly-challenge>
        </template>
        <template is="dom-if" if="{{type.isVideo}}" restamp>
            <video autoplay id="video" on-ended="boardFinished">
                <source src="{{board.src}}" type="video/mp4">
            </video>
        </template>
    </template>
</dom-module>
<script type="text/javascript">
    class KanoChallengeBoard {
        beforeRegister () {
            this.is = 'kano-challenge-board';
            this.properties = {
                board: {
                    type: Object,
                    value: () => {
                        return {}
                    }
                },
                type: {
                    type: Boolean,
                    computed: 'computeType(board.*)'
                }
            };
        }
        computeType () {
            if (this.board.type === 'blockly') {
                return { isBlockly: true };
            } else if (this.board.type === 'video') {
                return { isVideo: true };
            }
        }
        boardFinished () {
            this.fire('done');
        }
    }
    Polymer(KanoChallengeBoard);
</script>
