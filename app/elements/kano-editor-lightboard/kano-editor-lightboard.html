<link rel="import" href="../../../../polymer/polymer.html">
<link rel="import" href="../../../../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../kc-workspace-frame/kc-workspace-frame.html">
<link rel="import" href="../kc-workspace-frame/kc-parts-controls.html">
<link rel="import" href="../kano-workspace-lightboard/kano-workspace-lightboard.html">
<dom-module id="kano-editor-lightboard">
    <template>
        <style>
            :host {
                @apply --layout-vertical;
                width: 100%;
                height: 100%;
                padding-top: 12px;
            }
            kc-workspace-frame {
                @apply --layout-vertical;
                @apply --layout-flex;
                margin: 0 40px;
            }
            kc-parts-controls {
                flex: 1;
            }
            kano-workspace-lightboard {
                @apply --layout-flex;
            }
            ::slotted(.data),
            ::slotted(.hardware),
            ::slotted(kano-part-oscillator) {
                display: none;
            }
        </style>
        <kc-workspace-frame id="wrapper"
                                width="[[width]]"
                                height="[[height]]"
                                running="{{running}}">
            <kano-workspace-lightboard id="workspace" width="[[width]]" height="[[height]]" slot="workspace">
                <slot name="part" slot="part"></slot>
            </kano-workspace-lightboard>
            <kc-parts-controls slot="controls"
                                parts-menu-open="[[partsMenuOpen]]"
                                parts="{{parts}}"></kc-parts-controls>
        </kc-workspace-frame>
    </template>
    <script>
        /* globals Polymer, Kano */
        Polymer({
            is: 'kano-editor-lightboard',
            properties: {
                autoStart: Boolean,
                partsMenuOpen: {
                    type: Boolean,
                    value: false
                },
                editableLayout: {
                    type: Boolean,
                    value: false
                },
                running: {
                    type: Boolean,
                    value: false
                },
                parts: {
                    type: Array,
                    value: () => {
                        return [];
                    },
                    notify: true
                },
                availableParts: {
                    type: Array
                }
            },
            _resetAppState () {
                this.fire('reset-app-state');
            },
            _getRunningStatus (running) {
                return running ? 'running' : 'stopped';
            },
            clear () {
                this.$.workspace.clear();
            },
            getBackgroundColor () {
                this.$.workspace.getBackgroundColor();
            },
            getWorkspace () {
                return this.$.workspace;
            },
            getRestrictElement () {
                return this.$.workspace;
            },
            getViewport () {
                return this.$.workspace;
            },
            getViewportScale () {
                return this.$.wrapper.getScale();
            }
        });
    </script>
</dom-module>
