<dom-module id="kano-view">
    <style>
    :host {
        display: block;
        @apply(--layout-vertical);
    }
    </style>
    <template>

    </template>
</dom-module>
<script type="text/javascript">
    class KanoView {
        beforeRegister () {
            this.is = 'kano-view';
            this.properties = {
                viewName: {
                    type: String,
                    observer: 'viewChanged'
                },
                location: {
                    type: String,
                    value: 'views'
                }
            }
        }
        viewChanged () {
            if (this.view && !this.viewName.length) {
                return;
            }
            this.loadView(this.viewName)
                .then(this.displayView.bind(this))
                .catch((e) => {
                    this.fire('kano-error', new Error(`Could not load view ${this.viewName}`));
                });
        }
        displayView () {
            let viewComponent = document.createElement(this.viewName);
            viewComponent.style.flex = 1;
            while (this.firstChild) {
                this.removeChild(this.firstChild);
            }
            this.appendChild(viewComponent);
        }
        /**
         * Import the view component
         * @param  {String} partial   Name of the component to import
         * @return {Promise}          Will resolve when the element is loaded
         */
        loadView (partial) {
            return new Promise((resolve, reject) => {
                this.importHref(`./${this.location}/${partial}/${partial}.html`, resolve, reject);
            });
        }
    }
    Polymer(KanoView);
</script>
