<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="import" href="./kano-bitmap-list.html" async onload="init()">
        <style>
            html, body {
                margin: 0;
                padding: 0;
                height: 100vh;
            }
            body {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            kano-bitmap-list {
                max-width: 600px;
            }
        </style>
    </head>
    <body>
        <template is="dom-bind" id="bind">
            <kano-bitmap-list width="16" height="8" bitmaps="{{bitmaps}}" selected="{{selected}}"></kano-bitmap-list>
        </template>

        <button id="add-frame" type="button">Add a frame</button>
        <script>
            window.Polymer = {
                dom: 'shadow'
            }
            function init() {
                var bind = document.getElementById('bind'),
                    button = document.getElementById('add-frame'),
                    i = 0;

                button.addEventListener('click', () => {
                    addFrame();
                });

                bind.bitmaps = [];
                bind.width = 16;
                bind.height = 8;

                addFrame();

                function newFrame () {
                    let frame = [],
                        color = `hsl(${i * 40}, 80%, 80%)`;
                    for (let i = 0; i < bind.width * bind.height; i++) {
                        frame.push(color);
                    }
                    i++;
                    return frame;
                }

                function addFrame() {
                    bind.push('bitmaps', newFrame());
                }
            }
        </script>
    </body>
</html>