<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../kano-ui-behavior.html">
<link rel="import" href="../../../scripts/kano/make-apps/parts-api/gyro-accelerometer.html">
<script type="text/javascript">
    /* globals Polymer, Kano */

    Polymer({
        is: 'kano-part-gyro-accelerometer',
        behaviors: [
            Kano.MakeApps.PartsAPI['gyro-accelerometer'],
            Kano.Behaviors.UIBehavior
        ],
        properties: {
            lastGyroVector: {
                type: Object,
                value: {x: 0.0, y: 0.0, z: 0.0}
            },
            lastAccelVector: {
                type: Object,
                value: {x: 0.0, y: 0.0, z: 0.0}
            }
        },
        getAngle (vec) {
            let ref = {x: 1, y: 0},
                dot = (ref.x * vec.x + ref.y * vec.y),
                det = (ref.x * vec.y + ref.y * vec.x),
                angleRad = Math.atan2(det, dot);

            if (isNaN(angleRad)) {
                return 0;
            } else {
                return angleRad * 180 / Math.PI;
            }
        }
    });
</script>
