<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../kano-ui-behavior.html">
<link rel="import" href="../../../scripts/kano/make-apps/parts-api/gesture-sensor.html">

<script type="text/javascript">
    /* globals Polymer, Kano */

    Polymer({
        is: 'kano-part-gesture-sensor',
        behaviors: [
            Kano.MakeApps.PartsAPI['gesture-sensor'],
            Kano.Behaviors.UIBehavior
        ],
        attached () {
            Kano.AppModules.getModule('gestureSensor').connect({
                name: 'Make Apps'
            });
        },
        start () {
            Kano.Behaviors.UIBehavior.start.apply(this, arguments);
            this.gestureEventListener = (e) => {
                if (e.type) {
                    this._animate(e.type);
                    this.fire('gesture-' + e.type);
                }
            };
            Kano.AppModules.getModule('gestureSensor').on('gesture-sensor:0:gesture', this.gestureEventListener);
        },
        stop () {
            Kano.Behaviors.UIBehavior.stop.apply(this, arguments);
            Kano.Behaviors.EmitterBehavior.stop.apply(this, arguments);
            Kano.AppModules.getModule('gestureSensor').removeListener('gesture-sensor:0:gesture', this.gestureEventListener);
        }
    });
</script>
