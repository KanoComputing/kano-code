<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../kano-ui-behavior.html">
<link rel="import" href="../../../scripts/kano/make-apps/parts-api/motion-sensor.html">
<script type="text/javascript">
    /* globals Polymer, Kano */

    Polymer({
        is: 'kano-part-motion-sensor',
        behaviors: [
            Kano.MakeApps.PartsAPI['motion-sensor'],
            Kano.Behaviors.UIBehavior
        ],
        properties: {
            lastProximityValue: {
                type: Number,
                value: 0
            }
        },
        observers: [
            '_reconfigure(model.userProperties.mode, model.userProperties.updateInterval)'
        ],
        // ready () {
        //     this.lastMode = this.model.userProperties.mode;
        //     this.lastUpdateInterval = model.userProperties.updateInterval;
        // },
        _reconfigure (mode, interval) {
            this.debounce('reconfigure', () => {
                if (mode !== this.lastMode) {
                    this.lastMode = this.model.userProperties.mode;
                    this.setMode(this.model.userProperties.mode);
                }

                if (interval !== this.lastUpdateInterval) {
                    this.lastUpdateInterval = this.model.userProperties.updateInterval;
                    this.setUpdateInterval(this.model.userProperties.updateInterval);
                }
            }, 1000);
        }
    });
</script>
