<script>
    const COLOUR = '#70b046';
    Blockly.Blocks.minecraft_set_blocks = {
        init: function () {
            let json = {
                id: "set_blocks",
                message0: "Set Blocks %1 Position %2 Size %3 Type %4",
                args0: [
                    {
                        type: "input_dummy"
                    },
                    {
                        type: "input_value",
                        name: "POSITION",
                        check: "Array"
                    },
                    {
                        type: "input_value",
                        name: "SIZE",
                        check: "Array"
                    },
                    {
                        type: 'field_dropdown',
                        name: 'TYPE',
                        options: [
                            ['grass', '2'],
                            ['dirt', '3'],
                            ['cobblestone', '4']
                        ]
                    }
                ],
                inputsInline: false,
                previousStatement: null,
                nextStatement: null,
                colour: COLOUR
            };
            this.jsonInit(json);
        }
    };

    Blockly.JavaScript.minecraft_set_blocks = (block) => {
        let vpos = Blockly.JavaScript.valueToCode(block, 'POSITION', Blockly.JavaScript.ORDER_ATOMIC) || '[0, 0, 0]',
            vsize = Blockly.JavaScript.valueToCode(block, 'SIZE', Blockly.JavaScript.ORDER_ATOMIC) || '[0, 0, 0]',
            type = block.getFieldValue('TYPE'),
            code = `minecraft.setBlocks(${vpos}, ${vsize}, ${type});\n`;

        return code;
    };

    Blockly.Blocks.minecraft_coordinates = {
        init: function () {
            let json = {
                id: "minecraft_coordinates",
                message0: "x %1 y %2 z %3",
                args0: [
                    {
                        type: "input_value",
                        name: "X",
                        check: "Number"
                    },
                    {
                        type: "input_value",
                        name: "Y",
                        check: "Number"
                    },
                    {
                        type: "input_value",
                        name: "Z",
                        check: "Number"
                    }
                ],
                inputsInline: true,
                output: "Array",
                colour: COLOUR
            };
            this.jsonInit(json);
        }
    };

    Blockly.JavaScript.minecraft_coordinates = (block) => {
        let x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC) || '0',
            y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC) || '0',
            z = Blockly.JavaScript.valueToCode(block, 'Z', Blockly.JavaScript.ORDER_ATOMIC) || '0',

            code = `[${x}, ${y}, ${z}]`;
        return [code, Blockly.JavaScript.ORDER_ATOMIC];
    };
</script>
