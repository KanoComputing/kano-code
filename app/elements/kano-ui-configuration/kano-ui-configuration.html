<link rel="import" href="../kano-ui-customizer/kano-ui-customizer.html">
<link rel="import" href="../kano-style/input.html">
<dom-module id="kano-ui-configuration">
    <style is="custom-style" include="input-range"></style>
    <style>
    :host {
        @apply(--layout-vertical);
        padding: 25px 20px 15px 0px;
    }
    :host .name-edit input {
        @apply(--kano-light-input);
        font-size: 1.4em;
    }
    :host .input-line {
        margin-top: 5px;
    }
    :host .label {
        display: block;
    }
    :host .value {
        font-weight: bold;
    }
    *[hidden] {
        display: none !important;
    }
    </style>
    <template>
        <kano-ui-customizer id="properties"
            customizable="{{element.customizable.properties}}"
            user-values="{{element.userProperties}}">
        </kano-ui-customizer>
        <kano-ui-customizer id="style"
            customizable="{{element.customizable.style}}"
            user-values="{{element.userStyle}}">
        </kano-ui-customizer>
        <div hidden$="[[!element.showDefaultConfiguration]]">
            <div class="input-line" hidden$="[[element.positionDisabled]]">
                <kano-input-range value="{{element.position.x}}" label="Y Position" min="0" max="310">
                </kano-input-range>
            </div>
            <div class="input-line" hidden$="[[element.positionDisabled]]">
                <kano-input-range value="{{element.position.y}}" label="X Position" min="0" max="180">
                </kano-input-range>
            </div>
            <div class="input-line" hidden$="[[element.rotationDisabled]]">
                <kano-input-range value="{{element.rotation}}" label="Rotation" min="0" max="360" symbol="Â°">
                </kano-input-range>
            </div>
            <div class="input-line" hidden$="[[element.scaleDisabled]]">
                <kano-input-range value="{{element.scale}}" label="Scale" min="1" max="500" symbol="%">
                </kano-input-range>
            </div>
        </div>
    </template>
</dom-module>

<script type="text/javascript">
    /* globals Polymer */

    Polymer({
        is: 'kano-ui-configuration',
        properties: {
            element: {
                type: Object,
                notify: true
            },
            roundPosition: {
                type: Object
            }
        },
        observers: [
            'computeRoundPosition(element.position.*)'
        ],
        computeRoundPosition () {
            let pos;
            if (!this.element) {
                return;
            }
            pos = this.element.position;
            if (!pos) {
                return;
            }
            this.set('roundPosition',{
                x: Math.ceil(pos.x) || 0,
                y: Math.ceil(pos.y) || 0
            });
        }
    });
</script>
