<link rel="import" href="../behaviors/kano-media-query-behavior.html">
<link rel="import" href="../kano-code-shared-styles/kano-code-shared-styles.html">
<dom-module id="kano-background-editor">
    <style include="kano-code-shared-styles">
    :host .title-bar {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --layout-justified;
        text-align: left;
        font-family: var(--font-body);
        font-weight: bold;
        font-size: 18px;
        color: rgba(255,255,255,0.5);
        border-bottom: 1px solid #202428;
        padding: var(--kano-modal-header-padding-large);
    }
    :host([small-screen]) .title-bar {
        padding: var(--kano-modal-header-padding-small);
    }
    :host .type-display {
        width: 80px;
        margin-right: 8px;
    };
    :host button {
        @apply --kano-button;
        @apply --layout-self-center;
        text-shadow: none;
        font-weight: bold;
    }
    :host .done-button {
        background-color: var(--color-grassland);
    }
    :host .done-button:hover {
        background-color: var(--color-apple);
    }
    :host .background {
        padding: 24px 36px 12px;
    }
    :host .head {
        background: var(--color-orange);
        overflow: auto;
    }
    :host .head h2 {
        margin-left: 25px;
        margin-right: 25px;
        text-overflow: ellipsis;
        color: white;
        font-weight: 400;
    }
    </style>
    <template>
        <div class="title-bar">
            <div class="type-display">Background</div>
            <button class="done-button" type="button" dialog-dismiss>Done</button>
        </div>
        <template is="dom-if" if="{{isNormalMode}}">
            <div name="background" class="background" id="background">
                <kano-ui-customizer id="background_style" customizable="{{backgroundOptions}}" user-values="{{background.userStyle}}"></kano-ui-customizer>
            </div>
        </template>
        <template is="dom-if" if="{{!isNormalMode}}">
            <h3>Select a part to change its settings.</h3>
        </template>
    </template>

</dom-module>
<script type="text/javascript">
    /* globals Polymer */

    Polymer({
        is: 'kano-background-editor',
        behaviors: [
            Kano.Behaviors.MediaQueryBehavior
        ],
        properties: {
            background: {
                type: Object,
                value: () => {
                    return {
                        name: 'My app',
                        userStyle: {}
                    };
                }
            },
            mode: {
                type: Object,
                observer: '_modeChanged'
            },
            isNormalMode: {
                type: Boolean,
                notify: true
            }
        },
        _modeChanged (newValue, oldValue) {
            if (newValue !== oldValue) {
                this.isNormalMode = (newValue === 'normal');
            }
        },
        attached () {
            this.set('backgroundOptions', [{
                key: 'background',
                type: 'color',
                label: 'Color'
            }]);
        }
    });
</script>
