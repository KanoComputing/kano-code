<link rel="import" href="../behaviors/kano-media-query-behavior.html">
<link rel="import" href="../kano-code-shared-styles/kano-code-shared-styles.html">
<link rel="import" href="../kano-part-editor-topbar/kano-part-editor-topbar.html">
<dom-module id="kano-background-editor">
    <style include="kano-code-shared-styles">
    :host {
        display: block;
    }
    .editor {
        padding: var(--kano-part-editor-padding);
    }
    </style>
    <template>
        <kano-part-editor-topbar icon="[[element.type]]" label="[[element.label]]" theme="[[theme]]"></kano-part-editor-topbar>
        <div class="editor">
            <template is="dom-if" if="{{isNormalMode}}">
                <div name="background" class="background" id="background">
                    <kano-ui-customizer id="background_style" customizable="{{backgroundOptions}}" user-values="{{background.userStyle}}"></kano-ui-customizer>
                </div>
            </template>
            <template is="dom-if" if="{{!isNormalMode}}">
                <h3>Select a part to change its settings.</h3>
            </template>
        </div>
    </template>

</dom-module>
<script type="text/javascript">
    /* globals Polymer */

    Polymer({
        is: 'kano-background-editor',
        behaviors: [
            Kano.Behaviors.MediaQueryBehavior
        ],
        properties: {
            background: {
                type: Object,
                value: () => {
                    return {
                        name: 'My app',
                        userStyle: {}
                    };
                }
            },
            mode: {
                type: Object,
                observer: '_modeChanged'
            },
            isNormalMode: {
                type: Boolean,
                notify: true
            }
        },
        _modeChanged (newValue, oldValue) {
            if (newValue !== oldValue) {
                this.isNormalMode = (newValue === 'normal');
            }
        },
        attached () {
            this.set('backgroundOptions', [{
                key: 'background',
                type: 'color',
                label: 'Color'
            }]);
        }
    });
</script>
