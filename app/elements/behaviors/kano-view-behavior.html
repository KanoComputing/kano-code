<link rel="import" href="./kano-tracking-behavior.html">

<script type="text/javascript">

    window.Kano = window.Kano || {};

    window.Kano.Behaviors = window.Kano.Behaviors || {};

     var ViewBehavior = {
        properties: {
            context: {
                type: Object
            },
            user: {
                type: Object,
                notify: true
            }
        },
        created () {
            this.notifyOnLoad = true;
        },
        attached () {
            this.config = Kano.MakeApps.config;
            if (this.notifyOnLoad) {
                this.fire('view-loaded');
            }
            this.async(() => {
                this.trackPage();
            });
        },
        trackPage () {
            this.dispatchTrackingEvent({
                'event'            : 'virtualPageView',
                'virtualPageTitle' : document.title,
                'virtualPageURL'   : window.location.pathname
            });
        }
    };

    window.Kano.Behaviors.ViewBehavior = [window.Kano.Behaviors.TrackingBehavior, ViewBehavior];

</script>
