<dom-module id="kano-value-preview">
    <style>
    :host {
        display: inline-block;
    }
    :host .color-value {
        border-radius: 3px;
        border: 1px solid rgba(0, 0, 0, 0.55);
        width: 24px;
        height: 18px;
    }
    :host #input {
        border-radius: 6px;
        color: black;
        background: rgba(255, 255, 255, 0.7);
        padding: 0 4px;
        line-height: 1;
    }
    :host .simple-value {
        border: 1px solid rgba(0, 0, 0, 0.5);
        background: rgb(220, 231, 191);
        padding: 4px;
    }
    </style>
    <template>
        <div id="display" class$="[[type]]">
            <div id="input">
                <slot></slot>
            </div>
        </div>
    </template>
    <script type="text/javascript">
        const HEX_COLOR_REGEXP = /#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/;
        Polymer({
            is: 'kano-value-preview',
            properties: {
                type: {
                    type: String,
                    value: null
                }
            },
            attached () {
                this._render();
            },
            _render () {
                let value = this.textContent;
                if (HEX_COLOR_REGEXP.exec(value)) {
                    this.type = "color-value";
                    this.$.display.style.backgroundColor = value;
                    this.$.input.innerHTML = '';
                } else {
                    this.type = "simple-value";
                }
            }
        });
    </script>
</dom-module>
