<dom-module id="kano-value-preview">
    <style>
    :host {
        display: inline-block;
    }
    .color-value {
        border-radius: 3px;
        border: 1px solid rgba(0, 0, 0, 0.55);
        width: 24px;
        height: 18px;
    }
    :host(.simple-value) {
        border: 1px solid rgba(255, 255, 255, 0.4);
        border-radius: 9px;
        padding: 0px 8px;
        color: white;
    }
    </style>
    <template>
        <slot></slot>
    </template>
    <script type="text/javascript">
        const HEX_COLOR_REGEXP = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;
        Polymer({
            is: 'kano-value-preview',
            attached () {
                this._render();
            },
            _render () {
                let value = this.textContent,
                    container;
                if (HEX_COLOR_REGEXP.test(value)) {
                    container = document.createElement('div');
                    container.style.backgroundColor = value;
                    container.className = 'color-value';
                    Polymer.dom(this.root).appendChild(container);
                    this.innerHTML = '';
                    this.toggleClass('simple-value', false);
                } else {
                    this.toggleClass('simple-value', true);
                }
            }
        });
    </script>
</dom-module>
