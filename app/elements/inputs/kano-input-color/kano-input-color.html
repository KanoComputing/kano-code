<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../behaviors.html">
<!--
`kano-input-color` Dislpay a color palette and allows selection by clicking on one of them

Example:
    <kano-input-color value="{{value}}"></kano-input-color>

@group Kano Elements
@hero hero.svg
@demo ./demo.html
-->
<dom-module id="kano-input-color">
    <style>
    :host .colors {
        text-align: center;
        margin: 8px 0;
    }
    :host .color {
        display: inline-block;
        width: 29px;
        height: 29px;
        margin: 2px;
        border-radius: 3px;
    }
    :host .color:hover {
        cursor: pointer;
    }
    </style>
    <template>
        <div class="colors">
            <template is="dom-repeat" items="{{colors}}" as="color">
                <div class="color" style$="[[_computeColor(color, value)]]" on-tap="_selectColor"></div>
            </template>
        </div>
    </template>
</dom-module>
<script type="text/javascript">

    const COLORS = [
        '#ffffff',  // White
        '#000000',  // Black
        '#e95c5a',  // Red
        '#ff842a',  // Kano Orange
        '#f8eb1e',  // Yellow
        '#3caa36',  // Green
        '#0e6633',  // Dark Green
        '#59b3d0',  // Light Blue
        '#2a3080',  // Dark Blue
        '#642682',  // Violet
        '#db7d92',  // Pink
        '#683d12'   // Brown
    ];

    Polymer({

        behaviors: [Kano.Behaviors.Input],

        is: 'kano-input-color',

        properties: {
            colors: {
                type: Array,
                value: () => COLORS
            },
            value: {
                type: String,
                value: COLORS[0]
            }
        },


        _computeColor (color, value) {
            let style = `background-color: ${color};`;
            if (color === value) {
                style += `outline: 1px dashed #aaa;
                            outline-offset: 1px;`;
            }
            if (color === '#ffffff') {
                style += `box-shadow: inset 0 0 0 1px #eee;`
            }
            return style;
        },

        _selectColor (e) {
            this.set('value', e.model.get('color'));
            this.fire('change', this.value);
        }
    });
</script>
