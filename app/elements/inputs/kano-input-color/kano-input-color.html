<link rel="import" href="../../../../../polymer/polymer.html">
<link rel="import" href="../../../../../kwc-color-picker/kwc-color-picker.html">
<link rel="import" href="../behaviors.html">
<!--
`kano-input-color` Display a color palette and allows selection by clicking on one of them
Example:
    <kano-input-color value="{{value}}"></kano-input-color>
### Styling
The following custom properties and mixins are available for styling:
Custom property | Description | Default
----------------|-------------|----------
`--kano-color-input-field` | Mixin for the input field | {}
`--kano-input-color-size` | Size of a single color field | 29px
`--kano-input-color-margin` | Size of margin around a color field | 2px
`--kano-input-color-background` | Background color on host | 'transparent'

@group Kano Elements
@hero hero.svg
@demo demo/kano-input-color.html
-->
<dom-module id="kano-input-color">
    <template>
        <style>
            :host {
                display: block;
            }
            label {
                @apply --kano-part-editor-label;
            }
            kwc-color-picker {
                width: 100%;
                height: 100%;
                @apply --kano-color-input-field;
            }
            [hidden] {
                display: none !important;
            }
        </style>
        <label hidden$="[[!label]]">[[label]]</label>
        <kwc-color-picker id="picker" value="{{value}}" colors="[[colors]]" idle="[[idle]]" row-size="[[rowSize]]"></kwc-color-picker>
    </template>
</dom-module>
<script type="text/javascript">
    Polymer({
        is: 'kano-input-color',
        behaviors: [
            Kano.Behaviors.Input
        ],
        properties: {
            colors: {
                type: Array
            },
            value: {
                type: String,
                notify: true,
                observer: '_onValueChanged'
            },
            rowSize: {
                type: Number,
                value: 12
            },
            idle: {
                type: Boolean,
                value: false
            },
            visible: {
                type: Boolean,
                value: false
            }
        },
        attached () {
            this.colors = this.$.picker.colors;
        },
        _onValueChanged (value) {
            this.fire('tracking-event', {
                name: 'color_selected'
            });
        },
        addColor (c) {
            this.$.picker.addColor(c);
        },
        // Returns the color palette for outside access
        getColorField () {
            return this.$.picker.getColorField();
        }
    });
</script>
