<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../behaviors.html">
<!--

`kano-input-color` Dislpay a color palette and allows selection by clicking on one of them

Example:
    <kano-input-color value="{{value}}"></kano-input-color>

@group Kano Elements
@hero hero.svg
@demo ./demo.html
-->
<dom-module id="kano-input-color">
    <style>
    :host {
        display: block;
        padding: 10px 0px;
        @apply(--layout-vertical);
    }
    :host .selectedColor {
        width: 60px;
        height: 60px;
        border-radius: 2px;
        margin: 3px;
    }
    :host .colors {
        @apply --layout-horizontal;
        @apply --layout-center-justified;
    }
    :host .color {
        width: 30px;
        height: 30px;
        margin: 2px;
        border-radius: 4px;
    }
    :host .color:hover {
        cursor: pointer;
    }
    </style>
    <template>
        <label>{{label}}</label>
        <div class="colors">
            <template is="dom-repeat" items="{{colors}}" as="color">
                <div class="color" style$="[[_computeColor(color, value)]]" on-tap="_selectColor"></div>
            </template>
        </div>
    </template>
</dom-module>
<script type="text/javascript">

    const COLORS = [
        '#000000',  // Black
        '#FFFFFF',  // White
        // '#CCCCCC',  // Light Gray
        // '#7D7A73',  // Gray
        '#E95C5A',  // Red
        '#FF842A',  // Kano Orange
        '#F8EB1E',  // Yellow
        // '#70C222',  // Light Green
        '#3CAA36',  // Green
        '#0E6633',  // Dark Green
        '#59b3d0',  // Light Blue
        '#2A3080',  // Dark Blue
        '#642682',  // Violet
        // '#E61974',  // Fuschia
        '#DB7D92',  // Pink
        '#683D12'   // Brown
    ];

    Polymer({

        behaviors: [Kano.Behaviors.Input],

        is: 'kano-input-color',

        properties: {
            colors: {
                type: Array,
                value: () => COLORS
            },
            value: {
                type: String,
                value: COLORS[0]
            }
        },

        _computeColor (color, value) {
            let style = `background-color: ${color};`;
            if (color === value) {
                style += `outline: 1px dashed #aaa;
                            outline-offset: 1px;`;
            }
            if (color === '#FFFFFF') {
                style += `box-shadow: inset 0 0 0 1px #eee;`
            }
            return style;
        },

        _selectColor (e) {
            this.set('value', e.model.get('color'));
            this.fire('change', this.value);
        }
    });
</script>
