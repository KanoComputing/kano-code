<link rel="import" href="../behaviors.html">
<link rel="import" href="../../kano-code-shared-styles/kano-code-shared-styles.html">
<link rel="import" href="../../../bower_components/web-components/kano-style/kano-style.html">

<dom-module id="kano-input-text">
    <style include="kano-code-shared-styles">
        :host {
            display: block;
        }
        label {
            @apply --kano-part-editor-label;
        }
        input {
            width: 100%;
            box-sizing: border-box;
            background-color: #484d53;
            height: 42px;
            border: 0;
            font-family: var(--font-body);
            font-size: 14px;
            font-weight: bold;
            line-height: 14px;
            color: #fff;
            padding-left: 8px;
            border-radius: 3px;
        }
        input:focus {
            background-color: #4E575E;
            outline: none;
            border: 2px solid rgba(255,255,255,0.25);
        }
        [hidden] {
            display: none !important;
        }
    </style>
    <template>
        <label hidden$="[[!label]]">[[label]]</label>
        <input type="text" id="input" value="{{value::input}}" on-keydown="enterQuitsInput" autofocus="[[autofocus]]"></input>
    </template>
</dom-module>
<script type="text/javascript">
    /* globals Polymer, Kano */

    Polymer({
        is: 'kano-input-text',
        behaviors: [Kano.Behaviors.Input],
        properties: {
            autofocus: Boolean
        },
        observers: [
            'valueChanged(value)',
            'themeChanged(theme)'
        ],
        focus () {
            this.$.input.focus();
        },
        select () {
            this.$.input.select();
        },
        valueChanged () {
            this.fire('change');
        },
        themeChanged (theme) {
            this.updateStyles({
                '--element-theme': theme
            });
        },
        enterQuitsInput (e) {
            if (e.key == 'Enter') {
                this.$.input.blur();
                return false;
            }
        }
    });
</script>
