<link rel="import" href="../kano-ui-editor/kano-ui-editor.html">
<link rel="import" href="../kano-data-editor/kano-data-editor.html">
<dom-module id="kano-part-editor">
    <style>
    :host {
        display: block;
        @apply(--layout-vertical);
    }
    :host kano-ui-editor,
    :host kano-data-editor {
        @apply(--layout-flex);
    }
    </style>
    <template>
        <template is="dom-if" if="[[isModelType(selected, 'ui')]]">
            <kano-ui-editor id="ui-editor"
                            parts="{{parts}}"
                            selected="{{selected}}"
                            background="{{background}}"
                            default-categories="{{defaultCategories}}"
                            codes="{{codes}}"></kano-ui-editor>
        </template>
        <template is="dom-if" if="[[isModelType(selected, 'data')]]">
            <kano-data-editor id="data-editor" selected="{{selected}}"></kano-data-editor>
        </template>
    </template>
</dom-module>
<script type="text/javascript">
    /* globals Polymer */

    class KanoPartEditor {

        beforeRegister () {
            this.is = 'kano-part-editor';
            this.properties = {
                parts: {
                    type: Array,
                    notify: true
                },
                selected: {
                    type: Object,
                    notify: true
                },
                defaultCategories: {
                    type: Array,
                    value: () => []
                },
                codes: {
                    type: Object,
                    notify: true
                },
                background: {
                    type: Object,
                    value: () => {
                        return {
                            name: 'My app',
                            userStyle: {}
                        };
                    },
                    notify: true
                }
            };
        }
        isModelType (selected, type) {
            if (!selected && type === 'ui') {
                return true;
            }
            return selected && selected.partType === type;
        }
        showCodeEditor () {
            let uiEditor = this.$$('#ui-editor');
            if (!uiEditor) {
                return;
            }
            uiEditor.showCodeEditor();
        }
        hideCodeEditor () {
            let uiEditor = this.$$('#ui-editor');
            if (!uiEditor) {
                return;
            }
            uiEditor.hideCodeEditor();
        }
        showPage (page) {
            let uiEditor = this.$$('#ui-editor');
            if (!uiEditor) {
                return;
            }
            uiEditor.showPage(page);
        }
    }
    Polymer(KanoPartEditor);
</script>
