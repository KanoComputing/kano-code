<dom-module id="kano-view-share-modal">
    <style>
        :host {
            display: block;
            position: relative;
            @apply(--layout-vertical);
            padding: 20px 20px 5px 20px;
        }
        :host button {
            @apply(--kano-button-small);
            margin-left: 5px;
        }
        :host button.share {
            background: var(--green-gradient, green);
        }

        :host .p-box {
            padding: 1em;
        }

        :host .screenshot {
            width: 100%;
        }

        :host .form-group label, :host .form-group input, :host .form-group textarea {
            display: block;
            width: 100%;
        }

        :host .buttons {
            justify-content: center;
            margin: 1em;
        };
    </style>
    <template>
        <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="p-box">
                    <img class="screenshot" src="{{imageUrl}}">
                </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="p-box">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" value="{{title::change}}">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea rows="8"
                                cols="40"
                                value="{{description::change}}"></textarea>
                    </div>
                    <div class="buttons">
                        <button on-tap="dismiss">Cancel</button>
                        <button on-tap="share" class="share">Share</button>
                    </div>
                </div>
            </div>

        </div>
    </template>
</dom-module>

<script>
    /* globals Polymer */
    class KanoShareModal {
        beforeRegister () {
            this.is = 'kano-view-share-modal';
            this.properties = {
                title: {
                    type: String
                },
                description: {
                    type: String
                },
                imageUrl: {
                    type: String,
                    notify: true
                }
            };
        }

        ready () {
            //set the imageUrl when the image has been generated
            document.addEventListener('image-generated', (e) => {
                this.imageUrl = e.detail.image.src;
            });
        }

        share () {
            this.fire('confirm', {
                title: this.title,
                description: this.description,
                image: this.imageUrl
            });
        }

        dimiss () {
            this.fire('dismiss');
        }
    }
    Polymer(KanoShareModal);
</script>
